
### 利用分支进行开发的工作流程

已经学会了新建分支和合并分支，可以（或应该）用它来做点什么呢？   
利用分支进行开发的工作流程。而正是由于分支管理的便捷，才衍生出了这类典型的工作模式。

- - - 

#### 长期分支   

由于 Git 使用简单的三方合并，所以就算在较长一段时间内，**反复多次把某个分支合并到另一分支**，也不是什么难事。也就是说，**你可以同时拥有多个开放的分支，每个分支用于完成特定的任务**，随着开发的推进，你可以随时把某个特性分支的成果并到其他分支中。

######分支    

![稳定分支总是比较老旧](http://git-scm.com/figures/18333fig0318-tn.png)

* master 保留完全稳定的代码，即已经发布或即将发布的代码     
* develop 或者 next 平行分支 用于后续的开发当进入稳定后 就可以合并到 master 分支内    
* 在确保这些已完成的特性分支（短期分支，比如之前的 iss53 分支）能够通过所有测试，并且不会引入更多错误之后，就可以并到主干分支中，等待下一次的发布。

######流水线

![想象成流水线可能会容易点](http://git-scm.com/figures/18333fig0319-tn.png)

你可以用这招维护不同层次的稳定性。某些大项目还会有个 proposed（建议）或 pu（proposed updates，建议更新）分支，它包含着那些可能还没有成熟到进入 next 或 master 的内容。这么做的目的是拥有不同层次的稳定性：当这些分支进入到更稳定的水平时，再把它们合并到更高层分支中去。再次说明下，使用多个长期分支的做法并非必需，不过一般来说，对于特大型项目或特复杂的项目，这么做确实更容易管理。

####特性分支

- - -

*在任何规模的项目中都可以使用特性（Topic）分支。一个特性分支是指一个短期的，用来实现单一特性或与其相关工作的分支。可能你在以前的版本控制系统里从未做过类似这样的事情，因为通常创建与合并分支消耗太大。然而在 Git 中，一天之内建立、使用、合并再删除多个分支是常见的事。*

![拥有多个特性分支的提交历史](http://git-scm.com/figures/18333fig0320-tn.png)

从下往上看：

1. 在 `master` 工作到C1
2. 新建 `iss91` 分支 修复问题，提交到C6时 又有解决问题的新办法
3. 回到 C4 新建分支 `iss91V2` 提交到C8时
4. 回到 `master` 提交了 C9 和 C10 
5. 回到 `iss91V2` 继续工作后，提交了C11
6. 又有别的想法，从 `master` 的 C10 处，新建 `dumbidea` 分支

- - -

在 iss91 的问题上 最终用了 V2，所以放弃了 iss91 (C5 和 C6 分支)，直接在主干中并入另外2个分支。

![ 合并了 dumbidea 和 iss91v2 后的分支历史](http://git-scm.com/figures/18333fig0321-tn.png)

最终的提交历史。


请务必牢记这些分支全部都是`本地分支`，这一点很重要。当你在使用分支及合并的时候，一切都是在你自己的 Git 仓库中进行的 — `完全不涉及与服务器的交互`。



[返回目录](https://github.com/wdyggh/note)
